if(WITH_OPENMP)
	add_definitions(-DOPENMP)
else()
	message("Error. Mantaflow pp files require an OpenMP enabled compiler")
endif()

set(INC
	${CMAKE_CURRENT_SOURCE_DIR}
	${CMAKE_CURRENT_SOURCE_DIR}/python
	${CMAKE_CURRENT_SOURCE_DIR}/plugin
	${CMAKE_CURRENT_SOURCE_DIR}/pwrapper
	${CMAKE_CURRENT_SOURCE_DIR}/util
	#gui
)

set(INC_SYS
	${ZLIB_INCLUDE_DIRS}
	${PYTHON_INCLUDE_DIRS}
)

#message("MANTA_processing ${CMAKE_CURRENT_SOURCE_DIR}/commonkernels.h")
set(SRC
#PP SOURCES and HEADERS
${CMAKE_CURRENT_SOURCE_DIR}/commonkernels.h
${CMAKE_CURRENT_SOURCE_DIR}/commonkernels.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/commonkernels.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/conjugategrad.cpp
${CMAKE_CURRENT_SOURCE_DIR}/conjugategrad.h
${CMAKE_CURRENT_SOURCE_DIR}/conjugategrad.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/conjugategrad.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/edgecollapse.cpp
${CMAKE_CURRENT_SOURCE_DIR}/edgecollapse.h
${CMAKE_CURRENT_SOURCE_DIR}/edgecollapse.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/edgecollapse.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fastmarch.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fastmarch.h
${CMAKE_CURRENT_SOURCE_DIR}/fastmarch.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/fastmarch.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fileio.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fileio.h
${CMAKE_CURRENT_SOURCE_DIR}/fileio.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/fileio.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fluidsolver.cpp
${CMAKE_CURRENT_SOURCE_DIR}/fluidsolver.h
${CMAKE_CURRENT_SOURCE_DIR}/fluidsolver.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/fluidsolver.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/general.cpp
${CMAKE_CURRENT_SOURCE_DIR}/general.h
${CMAKE_CURRENT_SOURCE_DIR}/general.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/general.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/grid.cpp
${CMAKE_CURRENT_SOURCE_DIR}/grid.h
${CMAKE_CURRENT_SOURCE_DIR}/grid.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/grid.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/hginfo.h
${CMAKE_CURRENT_SOURCE_DIR}/kernel.cpp
${CMAKE_CURRENT_SOURCE_DIR}/kernel.h
${CMAKE_CURRENT_SOURCE_DIR}/kernel.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/kernel.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/levelset.cpp
${CMAKE_CURRENT_SOURCE_DIR}/levelset.h
${CMAKE_CURRENT_SOURCE_DIR}/levelset.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/levelset.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/mesh.cpp
${CMAKE_CURRENT_SOURCE_DIR}/mesh.h
${CMAKE_CURRENT_SOURCE_DIR}/mesh.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/mesh.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/movingobs.cpp
${CMAKE_CURRENT_SOURCE_DIR}/movingobs.h
${CMAKE_CURRENT_SOURCE_DIR}/movingobs.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/movingobs.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/noisefield.cpp
${CMAKE_CURRENT_SOURCE_DIR}/noisefield.h
${CMAKE_CURRENT_SOURCE_DIR}/noisefield.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/noisefield.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/particle.cpp
${CMAKE_CURRENT_SOURCE_DIR}/particle.h
${CMAKE_CURRENT_SOURCE_DIR}/particle.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/particle.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/advection.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/extforces.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/fire.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/flip.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/initplugins.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/kepsilon.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/meshplugins.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/pressure.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/vortexplugins.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/waveletturbulence.cpp
${CMAKE_CURRENT_SOURCE_DIR}/plugin/waves.cpp
${CMAKE_CURRENT_SOURCE_DIR}/python/defines.py
${CMAKE_CURRENT_SOURCE_DIR}/python/defines.py.reg
${CMAKE_CURRENT_SOURCE_DIR}/python/defines.py.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/shapes.cpp
${CMAKE_CURRENT_SOURCE_DIR}/shapes.h
${CMAKE_CURRENT_SOURCE_DIR}/shapes.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/shapes.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/test.cpp
${CMAKE_CURRENT_SOURCE_DIR}/timing.cpp
${CMAKE_CURRENT_SOURCE_DIR}/timing.h
${CMAKE_CURRENT_SOURCE_DIR}/timing.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/timing.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/turbulencepart.cpp
${CMAKE_CURRENT_SOURCE_DIR}/turbulencepart.h
${CMAKE_CURRENT_SOURCE_DIR}/turbulencepart.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/turbulencepart.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/vortexpart.cpp
${CMAKE_CURRENT_SOURCE_DIR}/vortexpart.h
${CMAKE_CURRENT_SOURCE_DIR}/vortexpart.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/vortexpart.h.reg.cpp
${CMAKE_CURRENT_SOURCE_DIR}/vortexsheet.cpp
${CMAKE_CURRENT_SOURCE_DIR}/vortexsheet.h
${CMAKE_CURRENT_SOURCE_DIR}/vortexsheet.h.reg
${CMAKE_CURRENT_SOURCE_DIR}/vortexsheet.h.reg.cpp

${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pymain.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pclass.h
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pclass.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pvec3.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pconvert.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pconvert.h
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/registry.h
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/registry.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/pythonInclude.h
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/manta_api.cpp
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/manta.h
${CMAKE_CURRENT_SOURCE_DIR}/pwrapper/manta_api.h
${CMAKE_CURRENT_SOURCE_DIR}/util/vectorbase.cpp
${CMAKE_CURRENT_SOURCE_DIR}/util/integrator.h
${CMAKE_CURRENT_SOURCE_DIR}/util/vectorbase.h
${CMAKE_CURRENT_SOURCE_DIR}/util/vectorbase.cpp
${CMAKE_CURRENT_SOURCE_DIR}/util/quaternion.h
${CMAKE_CURRENT_SOURCE_DIR}/util/interpol.h
${CMAKE_CURRENT_SOURCE_DIR}/util/interpolHigh.h
${CMAKE_CURRENT_SOURCE_DIR}/util/mcubes.h
${CMAKE_CURRENT_SOURCE_DIR}/util/randomstream.h
${CMAKE_CURRENT_SOURCE_DIR}/util/solvana.h
${CMAKE_CURRENT_SOURCE_DIR}/util/simpleimage.cpp
${CMAKE_CURRENT_SOURCE_DIR}/util/simpleimage.h
)
list(REMOVE_DUPLICATES "SRC")
list_assert_duplicates("${SRC}")

blender_add_lib(bf_python_manta "${SRC}" "${INC}" "${INC_SYS}")
